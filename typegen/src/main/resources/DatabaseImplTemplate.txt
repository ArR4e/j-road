package ${databaseClass.packageName};

import com.nortal.jroad.client.exception.XTeeServiceConsumptionException;
import com.nortal.jroad.client.service.${databaseClass.baseImplementationName};
import com.nortal.jroad.model.XTeeMessage;
import com.nortal.jroad.model.XmlBeansXTeeMessage;
import com.nortal.jroad.enums.XRoadProtocolVersion;
import org.springframework.stereotype.Service;

/**
 * <code>${databaseClass.database}</code> X-road database implementation.
 */
@Service("${databaseClass.interfaceNameDecapitalized}")
public class ${databaseClass.implementationName} extends ${databaseClass.baseImplementationName} implements ${databaseClass.interfaceName} {
  private XRoadProtocolVersion protocolVersion = XRoadProtocolVersion.${databaseClass.protocolVersion};

  /**
   * <code>${databaseClass.database}</code> X-road service protocol version according to WSDL.
   */  
  @Override
  public XRoadProtocolVersion getProtocolVersion() {
    return protocolVersion;
  }
  
<#list databaseClass.methods as method>
<#list method.versions as version>

  /**
   * <code>${databaseClass.database}.${method.name}.v${version.version}</code> X-road service implementation.
   */
  public ${method.outputClass} ${version.name}(${method.inputClass} input) throws XTeeServiceConsumptionException {
    XTeeMessage<${method.outputClass}> response = send(new XmlBeansXTeeMessage<${method.inputClass}>(input), "${method.name}", "v${version.version}");

    return response.getContent();
  }
</#list>
</#list>

}